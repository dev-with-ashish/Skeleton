{% doc %}
  @prompt
    It’s a very graphic, retro-style ecommerce header.
    
    * **Overall layout:**
      A wide horizontal bar. The top half is patterned, the bottom half is a solid light-cream area that feels like the content area of the site.
    
    * **Striped band:**
      Across the top runs a thick band of diagonal stripes. The stripes alternate red, blue, yellow on an off-white background, giving a vintage ticket/tram-card vibe.
    
    * **Center logo:**
      In the middle there’s a tall red vertical capsule/rounded-rectangle that drops down into the cream area like a badge.
      Inside it, the word **“TRAM”** appears in bold, rounded white letters, framed by two horizontal white lines above and below.
    
    * **Background colors:**
    
      * Top stripe area: multicolour diagonal lines.
      * Main body: warm light cream.
      * Side margins: mustard/golden vertical strips on the far left and right edges.
    
    * **Icons:**
    
      * Bottom-left: a simple three-line “hamburger” menu icon in red.
      * Bottom-right: a red outline shopping bag icon.
    
    The whole header feels playful and geometric, with strong use of flat colors, simple icons, and a central logo badge breaking into the content area.
    
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-tram-header-{{ ai_gen_id }} {
    width: 100%;
    position: relative;
    overflow: hidden;
  }

  .ai-tram-header__container-{{ ai_gen_id }} {
    position: relative;
    height: {{ block.settings.header_height }}px;
  }

  .ai-tram-header__side-strip-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    bottom: 0;
    width: {{ block.settings.side_strip_width }}px;
    background-color: {{ block.settings.side_strip_color }};
  }

  .ai-tram-header__side-strip--left-{{ ai_gen_id }} {
    left: 0;
  }

  .ai-tram-header__side-strip--right-{{ ai_gen_id }} {
    right: 0;
  }

  .ai-tram-header__main-{{ ai_gen_id }} {
    position: relative;
    height: 100%;
    margin: 0 {{ block.settings.side_strip_width }}px;
  }

  .ai-tram-header__stripe-area-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: {{ block.settings.stripe_height }}%;
    background-color: {{ block.settings.stripe_background }};
    overflow: hidden;
  }

  .ai-tram-header__stripes-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: -100%;
    right: -100%;
    bottom: 0;
    background: repeating-linear-gradient(
      {{ block.settings.stripe_angle }}deg,
      {{ block.settings.stripe_color_1 }} 0px,
      {{ block.settings.stripe_color_1 }} {{ block.settings.stripe_width }}px,
      {{ block.settings.stripe_color_2 }} {{ block.settings.stripe_width }}px,
      {{ block.settings.stripe_color_2 }} calc({{ block.settings.stripe_width }}px * 2),
      {{ block.settings.stripe_color_3 }} calc({{ block.settings.stripe_width }}px * 2),
      {{ block.settings.stripe_color_3 }} calc({{ block.settings.stripe_width }}px * 3),
      {{ block.settings.stripe_background }} calc({{ block.settings.stripe_width }}px * 3),
      {{ block.settings.stripe_background }} calc({{ block.settings.stripe_width }}px * 4)
    );
  }

  .ai-tram-header__content-area-{{ ai_gen_id }} {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: {{ 100 | minus: block.settings.stripe_height }}%;
    background-color: {{ block.settings.content_background }};
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 {{ block.settings.content_padding }}px;
  }

  .ai-tram-header__logo-badge-{{ ai_gen_id }} {
    position: absolute;
    top: {{ block.settings.badge_top_offset }}%;
    left: 50%;
    transform: translateX(-50%);
    width: {{ block.settings.badge_width }}px;
    height: {{ block.settings.badge_height }}px;
    background-color: {{ block.settings.badge_color }};
    border-radius: {{ block.settings.badge_border_radius }}px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: {{ block.settings.badge_gap }}px;
    z-index: 10;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .ai-tram-header__logo-line-{{ ai_gen_id }} {
    width: {{ block.settings.logo_line_width }}%;
    height: {{ block.settings.logo_line_height }}px;
    background-color: {{ block.settings.logo_text_color }};
    border-radius: {{ block.settings.logo_line_height | divided_by: 2 }}px;
  }

  .ai-tram-header__logo-text-{{ ai_gen_id }} {
    color: {{ block.settings.logo_text_color }};
    font-size: {{ block.settings.logo_font_size }}px;
    font-weight: 700;
    letter-spacing: {{ block.settings.logo_letter_spacing }}px;
    margin: 0;
    line-height: 1;
    font-family: {{ block.settings.logo_font.family }}, {{ block.settings.logo_font.fallback_families }};
    font-weight: {{ block.settings.logo_font.weight }};
  }

  .ai-tram-header__menu-icon-{{ ai_gen_id }},
  .ai-tram-header__cart-icon-{{ ai_gen_id }} {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: {{ block.settings.icon_color }};
    transition: opacity 0.2s ease;
  }

  .ai-tram-header__menu-icon-{{ ai_gen_id }}:hover,
  .ai-tram-header__cart-icon-{{ ai_gen_id }}:hover {
    opacity: 0.7;
  }

  .ai-tram-header__menu-icon-{{ ai_gen_id }} svg,
  .ai-tram-header__cart-icon-{{ ai_gen_id }} svg {
    width: {{ block.settings.icon_size }}px;
    height: {{ block.settings.icon_size }}px;
    stroke: currentColor;
    fill: none;
    stroke-width: 2;
  }

  .ai-tram-header__hamburger-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    gap: {{ block.settings.hamburger_gap }}px;
  }

  .ai-tram-header__hamburger-line-{{ ai_gen_id }} {
    width: {{ block.settings.icon_size }}px;
    height: {{ block.settings.hamburger_line_height }}px;
    background-color: currentColor;
    border-radius: {{ block.settings.hamburger_line_height | divided_by: 2 }}px;
  }

  @media screen and (max-width: 749px) {
    .ai-tram-header__container-{{ ai_gen_id }} {
      height: {{ block.settings.header_height | times: 0.7 }}px;
    }

    .ai-tram-header__logo-badge-{{ ai_gen_id }} {
      width: {{ block.settings.badge_width | times: 0.7 }}px;
      height: {{ block.settings.badge_height | times: 0.7 }}px;
    }

    .ai-tram-header__logo-text-{{ ai_gen_id }} {
      font-size: {{ block.settings.logo_font_size | times: 0.7 }}px;
    }

    .ai-tram-header__content-area-{{ ai_gen_id }} {
      padding: 0 {{ block.settings.content_padding | times: 0.5 }}px;
    }

    .ai-tram-header__menu-icon-{{ ai_gen_id }} svg,
    .ai-tram-header__cart-icon-{{ ai_gen_id }} svg {
      width: {{ block.settings.icon_size | times: 0.8 }}px;
      height: {{ block.settings.icon_size | times: 0.8 }}px;
    }

    .ai-tram-header__hamburger-line-{{ ai_gen_id }} {
      width: {{ block.settings.icon_size | times: 0.8 }}px;
    }
  }
{% endstyle %}

<tram-header-{{ ai_gen_id }} class="ai-tram-header-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-tram-header__container-{{ ai_gen_id }}">
    <div class="ai-tram-header__side-strip-{{ ai_gen_id }} ai-tram-header__side-strip--left-{{ ai_gen_id }}"></div>
    <div class="ai-tram-header__side-strip-{{ ai_gen_id }} ai-tram-header__side-strip--right-{{ ai_gen_id }}"></div>
    
    <div class="ai-tram-header__main-{{ ai_gen_id }}">
      <div class="ai-tram-header__stripe-area-{{ ai_gen_id }}">
        <div class="ai-tram-header__stripes-{{ ai_gen_id }}"></div>
      </div>
      
      <div class="ai-tram-header__content-area-{{ ai_gen_id }}">
        <button 
          class="ai-tram-header__menu-icon-{{ ai_gen_id }}"
          aria-label="Open menu"
          data-menu-button
        >
          <div class="ai-tram-header__hamburger-{{ ai_gen_id }}">
            <span class="ai-tram-header__hamburger-line-{{ ai_gen_id }}"></span>
            <span class="ai-tram-header__hamburger-line-{{ ai_gen_id }}"></span>
            <span class="ai-tram-header__hamburger-line-{{ ai_gen_id }}"></span>
          </div>
        </button>

        <a 
          href="{{ routes.cart_url }}"
          class="ai-tram-header__cart-icon-{{ ai_gen_id }}"
          aria-label="Shopping cart"
        >
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <path d="M16 10a4 4 0 0 1-8 0"></path>
          </svg>
        </a>
      </div>

      <div class="ai-tram-header__logo-badge-{{ ai_gen_id }}">
        <div class="ai-tram-header__logo-line-{{ ai_gen_id }}"></div>
        <h1 class="ai-tram-header__logo-text-{{ ai_gen_id }}">{{ block.settings.logo_text }}</h1>
        <div class="ai-tram-header__logo-line-{{ ai_gen_id }}"></div>
      </div>
    </div>
  </div>
</tram-header-{{ ai_gen_id }}>

<script>
  (function() {
    class TramHeader{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.menuButton = this.querySelector('[data-menu-button]');
        this.setupEventListeners();
      }

      setupEventListeners() {
        if (this.menuButton) {
          this.menuButton.addEventListener('click', () => {
            this.handleMenuClick();
          });
        }
      }

      handleMenuClick() {
        const menuDrawer = document.querySelector('menu-drawer');
        if (menuDrawer) {
          menuDrawer.open();
        }
      }
    }

    customElements.define('tram-header-{{ ai_gen_id }}', TramHeader{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Retro tram header",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "header_height",
      "min": 100,
      "max": 300,
      "step": 10,
      "unit": "px",
      "label": "Header height",
      "default": 180
    },
    {
      "type": "range",
      "id": "stripe_height",
      "min": 30,
      "max": 70,
      "step": 5,
      "unit": "%",
      "label": "Stripe area height",
      "default": 50
    },
    {
      "type": "range",
      "id": "side_strip_width",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Side strip width",
      "default": 20
    },
    {
      "type": "range",
      "id": "content_padding",
      "min": 20,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Content padding",
      "default": 40
    },
    {
      "type": "header",
      "content": "Stripe pattern"
    },
    {
      "type": "range",
      "id": "stripe_width",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Stripe width",
      "default": 20
    },
    {
      "type": "range",
      "id": "stripe_angle",
      "min": 0,
      "max": 90,
      "step": 5,
      "unit": "deg",
      "label": "Stripe angle",
      "default": 45
    },
    {
      "type": "color",
      "id": "stripe_background",
      "label": "Stripe background",
      "default": "#F5F5DC"
    },
    {
      "type": "color",
      "id": "stripe_color_1",
      "label": "Stripe color 1",
      "default": "#DC143C"
    },
    {
      "type": "color",
      "id": "stripe_color_2",
      "label": "Stripe color 2",
      "default": "#4169E1"
    },
    {
      "type": "color",
      "id": "stripe_color_3",
      "label": "Stripe color 3",
      "default": "#FFD700"
    },
    {
      "type": "header",
      "content": "Logo badge"
    },
    {
      "type": "text",
      "id": "logo_text",
      "label": "Logo text",
      "default": "TRAM"
    },
    {
      "type": "font_picker",
      "id": "logo_font",
      "label": "Logo font",
      "default": "assistant_n7"
    },
    {
      "type": "range",
      "id": "badge_width",
      "min": 80,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Badge width",
      "default": 120
    },
    {
      "type": "range",
      "id": "badge_height",
      "min": 120,
      "max": 280,
      "step": 10,
      "unit": "px",
      "label": "Badge height",
      "default": 200
    },
    {
      "type": "range",
      "id": "badge_top_offset",
      "min": 10,
      "max": 40,
      "step": 5,
      "unit": "%",
      "label": "Badge top position",
      "default": 20
    },
    {
      "type": "range",
      "id": "badge_border_radius",
      "min": 20,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Badge border radius",
      "default": 60
    },
    {
      "type": "range",
      "id": "badge_gap",
      "min": 5,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Badge spacing",
      "default": 10
    },
    {
      "type": "color",
      "id": "badge_color",
      "label": "Badge background",
      "default": "#DC143C"
    },
    {
      "type": "color",
      "id": "logo_text_color",
      "label": "Logo text color",
      "default": "#FFFFFF"
    },
    {
      "type": "range",
      "id": "logo_font_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Logo font size",
      "default": 36
    },
    {
      "type": "range",
      "id": "logo_letter_spacing",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Logo letter spacing",
      "default": 2
    },
    {
      "type": "range",
      "id": "logo_line_width",
      "min": 40,
      "max": 80,
      "step": 5,
      "unit": "%",
      "label": "Logo line width",
      "default": 60
    },
    {
      "type": "range",
      "id": "logo_line_height",
      "min": 2,
      "max": 6,
      "step": 1,
      "unit": "px",
      "label": "Logo line thickness",
      "default": 3
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "content_background",
      "label": "Content background",
      "default": "#FFF8DC"
    },
    {
      "type": "color",
      "id": "side_strip_color",
      "label": "Side strip color",
      "default": "#DAA520"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon color",
      "default": "#DC143C"
    },
    {
      "type": "header",
      "content": "Icons"
    },
    {
      "type": "range",
      "id": "icon_size",
      "min": 20,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Icon size",
      "default": 28
    },
    {
      "type": "range",
      "id": "hamburger_gap",
      "min": 3,
      "max": 8,
      "step": 1,
      "unit": "px",
      "label": "Hamburger line spacing",
      "default": 5
    },
    {
      "type": "range",
      "id": "hamburger_line_height",
      "min": 2,
      "max": 4,
      "step": 1,
      "unit": "px",
      "label": "Hamburger line thickness",
      "default": 3
    }
  ],
  "presets": [
    {
      "name": "Retro tram header"
    }
  ]
}
{% endschema %}
