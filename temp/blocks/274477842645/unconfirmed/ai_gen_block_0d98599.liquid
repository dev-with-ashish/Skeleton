{% doc %}
  @prompt
    full width and placeholder with height adjustment, make this block 100% width no left and right padding margin, always full image should be shown bothe left and right edge of the should be visible, the container should adapt the image in ratio and make the whole responsive to the device width
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-full-width-responsive-{{ ai_gen_id }} {
    width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
    padding: 0;
  }

  .ai-full-width-responsive__container-{{ ai_gen_id }} {
    width: 100%;
    position: relative;
    overflow: hidden;
    background-color: {{ block.settings.background_color }};
    margin: 0;
    padding: 0;
  }

  .ai-full-width-responsive__image-wrapper-{{ ai_gen_id }} {
    width: 100%;
    height: 0;
    padding-bottom: var(--ai-image-aspect-ratio-{{ ai_gen_id }});
    position: relative;
  }

  .ai-full-width-responsive__image-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    object-position: center;
    display: block;
  }

  .ai-full-width-responsive__placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 0;
    padding-bottom: 56.25%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f4f4f4;
  }

  .ai-full-width-responsive__placeholder-content-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-full-width-responsive__placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    max-width: 400px;
    max-height: 400px;
    opacity: 0.3;
  }

  .ai-full-width-responsive__empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 24px;
    font-size: 14px;
    color: #666;
    text-align: center;
    pointer-events: none;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 4px;
  }
{% endstyle %}

<div class="ai-full-width-responsive-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-full-width-responsive__container-{{ ai_gen_id }}">
    {% if block.settings.image %}
      {% assign aspect_ratio = block.settings.image.height | times: 100.0 | divided_by: block.settings.image.width %}
      <div 
        class="ai-full-width-responsive__image-wrapper-{{ ai_gen_id }}"
        style="--ai-image-aspect-ratio-{{ ai_gen_id }}: {{ aspect_ratio }}%;"
      >
        <img
          src="{{ block.settings.image | image_url: width: 2400 }}"
          alt="{{ block.settings.image.alt | escape }}"
          loading="lazy"
          width="{{ block.settings.image.width }}"
          height="{{ block.settings.image.height }}"
          class="ai-full-width-responsive__image-{{ ai_gen_id }}"
        >
      </div>
    {% else %}
      <div class="ai-full-width-responsive__placeholder-{{ ai_gen_id }}">
        <div class="ai-full-width-responsive__placeholder-content-{{ ai_gen_id }}">
          {{ 'image' | placeholder_svg_tag }}
          <div class="ai-full-width-responsive__empty-state-{{ ai_gen_id }}">
            Add an image to get started
          </div>
        </div>
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Responsive image",
  "settings": [
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#f4f4f4"
    }
  ],
  "presets": [
    {
      "name": "Responsive image"
    }
  ]
}
{% endschema %}
