{% doc %}
  @prompt
    a section to show a business profile eactly as shown on a google map, add get directions next to the call button and whatsapp button also

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-business-profile-{{ ai_gen_id }} {
    background-color: {{ block.settings.background_color }};
    border-radius: {{ block.settings.border_radius }}px;
    padding: 24px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    max-width: 400px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  .ai-business-profile__header-{{ ai_gen_id }} {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
  }

  .ai-business-profile__image-container-{{ ai_gen_id }} {
    width: 80px;
    height: 80px;
    border-radius: 8px;
    overflow: hidden;
    flex-shrink: 0;background-color: #f4f4f4;
    position: relative;
  }

  .ai-business-profile__image-container-{{ ai_gen_id }} img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-business-profile__image-container-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    background-color: #f4f4f4;
  }

  .ai-business-profile__info-{{ ai_gen_id }} {
    flex-grow: 1;
  }

  .ai-business-profile__name-{{ ai_gen_id }} {
    font-size: 20px;
    font-weight: 500;
    color: {{ block.settings.text_color }};
    margin: 0 0 4px 0;
    line-height: 1.2;
  }

  .ai-business-profile__category-{{ ai_gen_id }} {
    font-size: 14px;
    color: {{ block.settings.secondary_text_color }};
    margin: 0 0 8px 0;
  }

  .ai-business-profile__rating-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    gap: 4px;
    margin-bottom: 4px;
  }

  .ai-business-profile__stars-{{ ai_gen_id }} {
    display: flex;
    gap: 2px;
  }

  .ai-business-profile__star-{{ ai_gen_id }} {
    width: 14px;
    height: 14px;
    color: #fbbc04;
  }

  .ai-business-profile__star--empty-{{ ai_gen_id }} {
    color: #dadce0;
  }

  .ai-business-profile__rating-text-{{ ai_gen_id }} {
    font-size: 14px;
    color: {{ block.settings.secondary_text_color }};
    margin-left: 4px;
  }

  .ai-business-profile__status-{{ ai_gen_id }} {
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 12px;
  }

  .ai-business-profile__status--open-{{ ai_gen_id }} {
    color: #137333;
  }

  .ai-business-profile__status--closed-{{ ai_gen_id }} {
    color: #d93025;
  }

  .ai-business-profile__details-{{ ai_gen_id }} {
    margin-bottom: 16px;
  }

  .ai-business-profile__detail-{{ ai_gen_id }} {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 8px;
    font-size: 14px;
    color: {{ block.settings.text_color }};
  }

  .ai-business-profile__detail-icon-{{ ai_gen_id }} {
    width: 16px;
    height: 16px;
    color: {{ block.settings.secondary_text_color }};
    flex-shrink: 0;margin-top: 1px;
  }

  .ai-business-profile__detail-text-{{ ai_gen_id }} {
    line-height: 1.4;
  }

  .ai-business-profile__actions-{{ ai_gen_id }} {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .ai-business-profile__action-{{ ai_gen_id }} {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    border: 1px solid {{ block.settings.button_border_color }};
    border-radius: 20px;
    background-color: {{ block.settings.button_background_color }};
    color: {{ block.settings.button_text_color }};
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    transition: background-color 0.2s ease;
  }

  .ai-business-profile__action-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_color }};
  }

  .ai-business-profile__action-icon-{{ ai_gen_id }} {
    width: 16px;
    height: 16px;
  }

  .ai-business-profile__empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 8px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 12px;
    color: #666;
    text-align: center;
    pointer-events: none;
  }

  @media screen and (max-width: 749px) {
    .ai-business-profile-{{ ai_gen_id }} {
      padding: 20px;
    }

    .ai-business-profile__actions-{{ ai_gen_id }} {
      flex-direction: column;
    }

    .ai-business-profile__action-{{ ai_gen_id }} {
      justify-content: center;
    }
  }
{% endstyle %}<div
  class="ai-business-profile-{{ ai_gen_id }}"
  {{ block.shopify_attributes }}
>
  <div class="ai-business-profile__header-{{ ai_gen_id }}">
    <div class="ai-business-profile__image-container-{{ ai_gen_id }}">
      {% if block.settings.business_image %}
        <img
          src="{{ block.settings.business_image | image_url: width: 160}}"
          alt="{{ block.settings.business_name | escape }}"
          loading="lazy"
          width="80"
          height="80"
        >
      {% else %}
        {{ 'image' | placeholder_svg_tag }}<div class="ai-business-profile__empty-state-{{ ai_gen_id }}">
          Add business image
        </div>
      {% endif %}
    </div>
    
    <div class="ai-business-profile__info-{{ ai_gen_id }}">
      {% if block.settings.business_name != blank %}
        <h3 class="ai-business-profile__name-{{ ai_gen_id }}">{{ block.settings.business_name }}</h3>
      {% endif %}
      
      {% if block.settings.business_category != blank %}
        <div class="ai-business-profile__category-{{ ai_gen_id }}">{{ block.settings.business_category }}</div>
      {% endif %}
      
      {% if block.settings.show_rating %}
        <div class="ai-business-profile__rating-{{ ai_gen_id }}">
          <div class="ai-business-profile__stars-{{ ai_gen_id }}">
            {% for i in (1..5) %}<svg class="ai-business-profile__star-{{ ai_gen_id }} {% if i > block.settings.rating %}ai-business-profile__star--empty-{{ ai_gen_id }}{% endif %}" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
            {% endfor %}
          </div>
          <span class="ai-business-profile__rating-text-{{ ai_gen_id }}">{{ block.settings.rating | round: 1 }} ({{ block.settings.review_count }})</span>
        </div>
      {% endif %}
    </div>
  </div>

  {% if block.settings.show_status %}
    <div class="ai-business-profile__status-{{ ai_gen_id }} ai-business-profile__status--{{ block.settings.business_status }}-{{ ai_gen_id }}">
      {% if block.settings.business_status == 'open' %}
        Open⋅ Closes {{ block.settings.closing_time }}
      {% else %}
        Closed ⋅ Opens {{ block.settings.opening_time }}
      {% endif %}
    </div>
  {% endif %}

  <div class="ai-business-profile__details-{{ ai_gen_id }}">
    {% if block.settings.address != blank %}
      <div class="ai-business-profile__detail-{{ ai_gen_id }}">
        <svg class="ai-business-profile__detail-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
        </svg>
        <div class="ai-business-profile__detail-text-{{ ai_gen_id }}">{{ block.settings.address }}</div>
      </div>
    {% endif %}

    {% if block.settings.phone != blank %}
      <div class="ai-business-profile__detail-{{ ai_gen_id }}">
        <svg class="ai-business-profile__detail-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="currentColor">
          <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
        </svg>
        <div class="ai-business-profile__detail-text-{{ ai_gen_id }}">{{ block.settings.phone }}</div>
      </div>
    {% endif %}

    {% if block.settings.website != blank %}
      <div class="ai-business-profile__detail-{{ ai_gen_id }}">
        <svg class="ai-business-profile__detail-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 54.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
        </svg>
        <div class="ai-business-profile__detail-text-{{ ai_gen_id }}">{{ block.settings.website }}</div>
      </div>
    {% endif %}
  </div>

  <div class="ai-business-profile__actions-{{ ai_gen_id }}">
    {% if block.settings.directions_link != blank %}
      <a href="{{ block.settings.directions_link }}" class="ai-business-profile__action-{{ ai_gen_id }}">
        <svg class="ai-business-profile__action-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="currentColor">
          <path d="M21.71 11.29l-9-9c-.39-.39-1.02-.39-1.41 0l-9 9c-.39.39-.39 1.02 0 1.41l9 9c.39.39 1.02.39 1.41 0l9-9c.39-.39.39-1.02 0-1.41zM1414.5V12h-4v3H8v-4c0-.55.45-1 1-1h5V7.5l3.5 3.5-3.5 3.5z"/>
        </svg>
        Directions
      </a>
    {% endif %}

    {% if block.settings.phone != blank %}
      <a href="tel:{{ block.settings.phone }}" class="ai-business-profile__action-{{ ai_gen_id }}">
        <svg class="ai-business-profile__action-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="currentColor">
          <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
        </svg>
        Call
      </a>
    {% endif %}

    {% if block.settings.whatsapp_number != blank %}
      <a href="https://wa.me/{{ block.settings.whatsapp_number | replace: '+', '' | replace: ' ', '' | replace: '-', '' | replace: '(', '' | replace: ')', '' }}" class="ai-business-profile__action-{{ ai_gen_id }}" target="_blank" rel="noopener">
        <svg class="ai-business-profile__action-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="currentColor">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.4653.488"/>
        </svg>
        WhatsApp
      </a>
    {% endif %}

    {% if block.settings.website != blank %}
      <a href="{{ block.settings.website }}" class="ai-business-profile__action-{{ ai_gen_id }}" target="_blank" rel="noopener">
        <svg class="ai-business-profile__action-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
        </svg>
        Website
      </a>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Business profile",
  "settings": [
    {
      "type": "header",
      "content": "Business information"
    },
    {
      "type": "image_picker",
      "id": "business_image",
      "label": "Business image"
    },
    {
      "type": "text",
      "id": "business_name",
      "label": "Business name",
      "default": "Your Business Name"
    },
    {
      "type": "text",
      "id": "business_category",
      "label": "Business category",
      "default": "Restaurant"
    },
    {
      "type": "textarea",
      "id": "address",
      "label": "Address",
      "default": "123 Main Street, City, State 12345"
    },
    {
      "type": "text",
      "id": "phone",
      "label": "Phone number",
      "default": "(555) 123-4567"
    },
    {
      "type": "text",
      "id": "whatsapp_number",
      "label": "WhatsApp number",
      "default": "+1234567890"
    },
    {
      "type": "url",
      "id": "website",
      "label": "Website URL"
    },
    {
      "type": "url",
      "id": "directions_link",
      "label": "Directions link"
    },
    {
      "type": "header",
      "content": "Rating"
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "label": "Show rating",
      "default": true
    },
    {
      "type": "range",
      "id": "rating",
      "min": 1,
      "max": 5,
      "step": 0.1,
      "label": "Rating",
      "default": 4.5
    },
    {
      "type": "text",
      "id": "review_count",
      "label": "Review count",
      "default": "127"
    },
    {
      "type": "header",
      "content": "Hours"
    },
    {
      "type": "checkbox",
      "id": "show_status",
      "label": "Show business status",
      "default": true
    },
    {
      "type": "select",
      "id": "business_status",
      "label": "Current status",
      "options": [
        {
          "value": "open",
          "label": "Open"
        },
        {
          "value": "closed",
          "label": "Closed"
        }
      ],
      "default": "open"
    },
    {
      "type": "text",
      "id": "closing_time",
      "label": "Closing time",
      "default": "9:00 PM"
    },
    {
      "type": "text",
      "id": "opening_time",
      "label": "Opening time",
      "default": "9:00 AM"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#202124"
    },
    {
      "type": "color",
      "id": "secondary_text_color",
      "label": "Secondary text color",
      "default": "#5f6368"
    },
    {
      "type": "color",
      "id": "button_background_color",
      "label": "Button background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#1a73e8"
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "Button border color",
      "default": "#dadce0"
    },
    {
      "type": "color",
      "id": "button_hover_color",
      "label": "Button hover color",
      "default": "#f8f9fa"
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 8
    }
  ],
  "presets": [
    {
      "name": "Business profile"
    }
  ]
}
{% endschema %}